<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="./site.css"> {{{ css }}}

    <!-- access to the HEAD element -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>

    <nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">TKW v 3.5</a>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#AboutUs">About Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#GetStarted">Get Started</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#Connect">Connect</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#RolePlayingNotes">Role Playing Notes</a>
                </li>
            </ul>
        </div>
    </nav>

    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>

        <div class="carousel-inner" role="listbox">
            <div class="carousel-item active">
                <img class="first-slide" src="https://i.imgur.com/bicXcrs.jpg" alt="First slide">
                <div class="container">
                    <div class="carousel-caption d-none d-md-block text-right">
                        <h1>Nevik</h1>
                        <p>Paying a visit...
                            <br />To the simple human town.
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img class="second-slide" src="https://i.imgur.com/xYro6BX.jpg" alt="Second slide">
                <div class="container">
                    <div class="carousel-caption d-none d-md-block">
                        <h1>Dissolution of Ego</h1>
                        <p>Acrylic on canvas
                            <br />50 x 60 cm
                            <br />19.69" x 23.62"</p>
                        <p><a class="btn btn-lg btn-primary" href="#" role="button">View Details</a></p>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img class="third-slide" src="https://i.imgur.com/b33pq1v.jpg" alt="Third slide">
                <div class="container">
                    <div class="carousel-caption d-none d-md-block text-left">
                        <h1>Pure Orcs</h1>
                        <p>The very worst kind...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- carousel navigation -->
        <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <div class="container marketing">
        <div class="row">
            <div class="col-lg-4" id="AboutUs">
                <div class="text-center">
                    <img class="rounded-circle" src="http://www.garethhinds.com/sou/images/char_mischa.jpg" width="140">
                    <h2>About Us</h2>
                </div>
                <p>The Known World (TKW) is a Neverwinter Nights Persistent World run by a group of role players since 2003. TKW is currently in Version 3.0 slated for release with the latest version of NWN being sold by <a href="https://www.beamdog.com/products/neverwinter-nights-enhanced-edition">Beamdog</a>.</p>
            </div>

            <div class="col-lg-4 get-started" id="GetStarted">
                <div class="text-center">
                    <img class="rounded-circle" src="https://vignette.wikia.nocookie.net/adwr/images/1/12/Po_hu_m_30.png/revision/latest?cb=20090619031931" alt="Generic placeholder image" width="140">
                    <h2>Get Started</h2>
                </div>
                <ol>
                    <li>First <a href="https://www.beamdog.com/products/neverwinter-nights-enhanced-edition">purchase NWN from Beamdog</a> and install.</li>
                    <li>Prior to release in 2018, you can play the Beta version of the game by <a href="https://forums.beamdog.com/discussion/66994/installing-playing-the-head-start-version-of-nwn-ee">following the Head Start instructions from Beamdog</a>.</li>
                    <li><a href="#">Download the Community Expansion Pack (CEP)</a> from the Neverwinter Vault and <a href="#">install using the CEP install instructions</a>.</li>
                    <li><a href="#" id="OpenApplicationFormLink" data-toggle="modal" data-target="#ApplicationModal">Apply for access to the TKW server</a> and wait to be contacted by a DM.
                </ol>
            </div>

            <div class="col-lg-4" id="Connect">
                <div class="text-center">
                    <img class="rounded-circle" src="http://oakthorne.net/wiki/images/Evendur.jpg" alt="Generic placeholder image" width="140">
                    <h2>Connect</h2>
                </div>
                <p>Connect to the TKW Server at: TKW3.TheKnownWorld.Net</p>
                <p>Connect to the TKW Slack at: https://tkw-rp.slack.com</p>
            </div>
        </div>

        <hr class="featurette-divider" id="RolePlayingNotes">

        <div class="row featurette">
            <div class="col-md-7">
                <h2 class="featurette-heading">Role Playing Notes</h2>
                <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.Donec ullamcorper nulla non metus
                    auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.Donec ullamcorper nulla non metus auctor fringilla. Vestibulum
                    id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>

                <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.Donec ullamcorper nulla non metus
                    auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.Donec ullamcorper nulla non metus auctor fringilla. Vestibulum
                    id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>



            </div>
            <div class="col-md-5">
                <img class="featurette-image img-fluid mx-auto" src="http://cannabismoon.com/gallery/psycho/peter_gric/gric03.jpg" alt="Generic placeholder image">

                <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.Donec ullamcorper nulla non metus
                    auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.Donec ullamcorper nulla non metus auctor fringilla. Vestibulum
                    id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>
            </div>


        </div>

        <hr class="featurette-divider">

        <div class="modal" tabindex="-1" role="dialog" id="ApplicationModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form id="Application" method="post" action="/apply">
                        <div class="modal-header">
                            <h5 class="modal-title">Apply For Access</h5>
                            <button id="ModalCloseIcon" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>Provide your name and email address. A DM will contact you soon.</p>
                            <p>Name: <br /><input type="text" id="name" name="name" v-model="name" maxlength="35" v-on:keyup="getIsValidName" class="wide-input" /></p>
                            <div v-if="!isValidName" class="alert alert-danger alert-dismissible fade show" role="alert">
                                Please specify your name.
                            </div>
                            <p>Email: <br /><input type="text" id="email" name="email" v-model="email" maxlength="128" v-on:keyup="getIsValidEmail" class="wide-input" /></p>
                            <div v-if="!isValidEmail" class="alert alert-danger alert-dismissible fade show" role="alert">
                                Please use a valid email address.
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" id="ModalApply" class="btn btn-primary" v-on:click="apply">Apply</button>
                            <button type="button" id="ModalClose" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!--vue-ssr-outlet-->

        <footer>
            <p class="float-right"><a href="#">Back to top</a></p>
            <p>&copy; 2018 TKW &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
        </footer>

    </div>

</body>
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

{{{ javaScriptIncludes }}}

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.bundle.min.js"></script>

<script language="javascript">
    $(document).on('click', '.navbar-collapse', function(e) {
        if ($(e.target).is('a')) {
            $(this).collapse('hide');
        }
    });

    var applicationForm = new Vue({
        el: '#ApplicationModal',
        data: {
            name: '',
            email: '',
            isValidEmail: true,
            isValidName: true
        },
        methods: {
            getIsValidEmail: function() {
                var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                this.isValidEmail = re.test(this.email.toLowerCase()) ? true : false;
                return this.isValidEmail;
            },
            getIsValidName: function() {
                this.isValidName = (this.name.length > 0);
                return this.isValidName;
            },
            apply: function() {
                var formData = {
                    "name": applicationForm.name,
                    "email": applicationForm.email
                };

                if (this.getIsValidName() && this.getIsValidEmail()) {
                    $.ajax({
                        url: '/apply',
                        dataType: "json",
                        method: "POST",
                        data: JSON.stringify(formData),
                        success: function(data) {
                            alert(data.complete);
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            alert('error ' + textStatus + " " + errorThrown);
                        }
                    });

                } else {
                    return false;
                }
            }
        }
    });
</script>

{{{ unitTests }}}

</html>